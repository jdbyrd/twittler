<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>


      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        var index = streams.home.length - 1;
        var counter = 0;
        var userCounter = 0;
        var $section = $('<section></section');
        $section.appendTo('body');
        $section.addClass('tweeter');

        var tweetInterval = setInterval(newTwit, 1000);


        function newTwit(){
          for(x = counter; counter < streams.home.length; counter++){
            var tweet = streams.home[counter];
            var userName = tweet.user;
            var $tweet = $('<div></div>');
            var $tweetName = $('<h4></h4>');
            var $tweetMsg = $('<p></p>');
            $tweetName.data({'user': userName});
            $tweetName.text('@' + tweet.user);
            $tweetMsg.text(': ' + tweet.message + ' ' + tweet.created_at);
            $tweet.prependTo($section);
            $tweetName.appendTo($tweet);
            $tweetMsg.appendTo($tweet);
            $('h4').on('click', showUser);

          }
        }

        function showUser(){
          var user = $(this).data('user');
          $('section.tweeter').remove()
          clearInterval();
          var $section = $('<section></section');
          $section.appendTo('body');
          $section.addClass('user');
          var userInterval = setInterval(newUserTwit, 1000);

          function newUserTwit(){
            for(x = userCounter; userCounter < streams.users[user].length; userCounter++){
              var userTweet = streams.users[user][userCounter];
              var $userTweet = $('<div></div>');
              var $userTweetName = $('<h4></h4>');
              var $userTweetMsg = $('<p></p>');
              $userTweetName.text('@' + user);
              $userTweetMsg.text(': ' + userTweet.message + ' ' + userTweet.created_at);
              $userTweet.prependTo($section);
              $userTweetName.appendTo($userTweet);
              $userTweetMsg.appendTo($userTweet);
            }
          }
        }




     /*   function newTwit(){
          var newTweet = streams.home[counter];
          var className = newTweet.user;
          var $newTweet = $('<div></div>');
          var $newTweetName = $('<h4></h4>');
          var $newTweetMsg = $('<p></p>');
          $newTweet.addClass(className);
          $newTweetName.text('@' + newTweet.user);
          $newTweetMsg.text(': ' + newTweet.message + ' ' + newTweet.created_at);
          $newTweet.prependTo($body);
          $newTweetName.appendTo($newTweet);
          $newTweetMsg.appendTo($newTweet);
          counter++
        }
      */

        



      });

    </script>
  </body>
</html>
